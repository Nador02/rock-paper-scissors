<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors Game</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
    <div class="container">
        <div class="top">
            <div class="title">Make a choice to begin!</div>
            <div class="notification">test</div>
        </div> 
        <div class="middle">
            <div data-key="82" class="key">
                <kbd>R</kbd>
                <span id="choice">rock</span>
            </div>
            <div data-key="80" class="key">
                <kbd>P</kbd>
                <span id="choice">paper</span>
            </div>
            <div data-key="83" class="key">
                 <kbd>S</kbd>
                 <span id="choice">scissor</span>
            </div>
        </div>
        <div class="bottom"></div>
    </div>


    <script>
        let computerChoice = "";
        let playerScore = 0;
        let computerScore = 0;
        function computerPlay(){
            let rand = Math.random();
            if(rand >= 0.66)
                computerChoice = "rock";
            else if(rand <= 0.33)
                computerChoice = "scissors";
            else
                computerChoice = "paper";
        }
        function playRound(e){
            computerPlay();
            const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
            let playerChoice = key.querySelector('#choice').innerHTML;
            const notif = document.querySelector('.notification');
            if(playerChoice == "rock")
                if(computerChoice == "scissors"){
                    playerScore++;
                    notif.textContent = "Rock crushes scissors, you win this time. The score is: " + playerScore + "-" + computerScore;
                }
                else if(computerChoice == "paper"){
                    computerScore++;
                    notif.textContent = "Paper covers rock, haha I win this time! The score is: " + playerScore + "-" + computerScore;
                }
                else{
                    notif.textContent = "We both chose rock... so it's a tie! The score is: " + playerScore + "-" + computerScore;
                }
            else if(playerChoice == "paper")
                if(computerChoice == "scissors"){
                    computerScore++;
                    notif.textContent="Scissors cut paper, haha I win this time! The score is: " + playerScore + "-" + computerScore;
                }
                else if (computerChoice == "rock"){
                    playerScore++;
                    notif.textContent="Paper covers rock, you win this time. The score is: " + playerScore + "-" + computerScore;
                }
                else{
                    notif.textContent="We both chose paper... so it's a tie! The score is: " + playerScore + "-" + computerScore;
                }
            else
                if(computerChoice == "paper"){
                    playerScore++;
                    notif.textContent="Scissors cut paper, you win this time. The score is: " + playerScore + "-" + computerScore;
                }
                else if(computerChoice == "rock"){
                    computerScore++;
                    notif.textContent="Rock crushers scissors, haha I win this time! The score is: " + playerScore + "-" + computerScore;
                }
                else{
                    notif.textContent="We both chose scissors... so it's a tie! The score is: " + playerScore + "-" + computerScore;
                }
        if(playerScore >= 5)
        {
            notif.textContent="Congratulations you beat the computer!";
            playerScore= 0; 
            computerScore = 0;
        }
        else if(computerScore >= 5)
        {
            notif.textContent= "The computer won, guess you gotta try again!";
            playerScore = 0; 
            computerScore = 0;
        }
        }
        const keys = Array.from(document.querySelectorAll('.key'));
        //keys.forEach(key=> key.addEventListener('transitioned', removeTransition));
        window.addEventListener('keydown', playRound);
    </script>
    </body>
</html>